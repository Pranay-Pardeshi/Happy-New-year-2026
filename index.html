<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Life Calendar | Universal 3D Glass</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@200;400;600;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --glass-surface: rgba(255, 255, 255, 0.02);
            --glass-rim: rgba(255, 255, 255, 0.15);
            --text-primary: #ffffff;
            --text-secondary: rgba(255, 255, 255, 0.45);
            
            /* High-Viscosity Fluid Colors */
            --w1: #0f172a; --w2: #334155; --w3: #1e293b;
            
            /* Adaptive Light Position */
            --lx: 50%; --ly: 0%;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Plus Jakarta Sans', sans-serif;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            background: #000;
            color: var(--text-primary);
            min-height: 100vh;
            width: 100vw;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden; /* Prevent body scroll, use container scroll */
            position: relative;
        }

        /* --- Volumetric Fluid Background --- */
        .liquid-engine {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1;
            filter: blur(80px) contrast(1.1);
            opacity: 0.7;
            background: #000;
        }

        .fluid-layer {
            position: absolute;
            width: 200%; height: 200%;
            top: -50%; left: -50%;
            background: 
                radial-gradient(circle at 30% 30%, var(--w1) 0%, transparent 50%),
                radial-gradient(circle at 70% 60%, var(--w2) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, var(--w3) 0%, transparent 50%);
            animation: moveLiquid 25s infinite alternate ease-in-out;
        }

        @keyframes moveLiquid {
            0% { transform: translate(0,0) rotate(0deg); }
            100% { transform: translate(5%, 5%) rotate(5deg); }
        }

        /* --- Universal Adaptive Chassis --- */
        .glass-chassis {
            position: relative;
            width: 95vw;
            height: 94vh;
            display: grid;
            /* Default Desktop: 2 columns */
            grid-template-columns: 350px 1fr;
            grid-template-rows: 1fr;
            
            background: var(--glass-surface);
            backdrop-filter: blur(60px) saturate(200%) brightness(0.9);
            -webkit-backdrop-filter: blur(60px) saturate(200%) brightness(0.9);
            
            border-radius: clamp(20px, 5vw, 40px);
            border: 1px solid var(--glass-rim);
            box-shadow: 
                0 40px 80px rgba(0,0,0,0.8),
                inset 0 0 40px rgba(255,255,255,0.02),
                inset 0 1px 1px rgba(255,255,255,0.3);
            
            overflow: hidden;
            transition: all 0.5s cubic-bezier(0.19, 1, 0.22, 1);
        }

        /* Specular Surface Shine */
        .glass-chassis::before {
            content: '';
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle at var(--lx) var(--ly), rgba(255,255,255,0.06) 0%, transparent 60%);
            pointer-events: none;
            z-index: 10;
        }

        /* --- Sidebar / Mobile Top Deck --- */
        .sidebar {
            padding: clamp(1.5rem, 4vw, 3rem);
            display: flex;
            flex-direction: column;
            border-right: 1px solid rgba(255,255,255,0.08);
            background: rgba(0,0,0,0.2);
            overflow-y: auto;
            scrollbar-width: none;
        }
        .sidebar::-webkit-scrollbar { display: none; }

        .brand-badge {
            font-size: 0.75rem;
            letter-spacing: 5px;
            font-weight: 800;
            text-transform: uppercase;
            color: #fff;
            margin-bottom: 0.5rem;
            opacity: 0.7;
        }

        #ist-clock {
            font-size: clamp(2.5rem, 6vw, 4.5rem);
            font-weight: 200;
            letter-spacing: -3px;
            line-height: 1;
            margin: 1rem 0;
        }

        .vial-container {
            background: rgba(255,255,255,0.04);
            border: 1px solid rgba(255,255,255,0.05);
            border-radius: 20px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.2);
        }

        .vial-label {
            font-size: 0.6rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: var(--text-secondary);
            margin-bottom: 0.4rem;
            display: block;
        }

        .vial-value { font-size: 1.8rem; font-weight: 600; }

        .quote-box {
            font-style: italic;
            font-size: 0.85rem;
            line-height: 1.5;
            color: rgba(255,255,255,0.6);
            margin: 1rem 0;
            padding: 1rem;
            border-left: 2px solid rgba(255,255,255,0.1);
        }

        /* --- Main Content / Calendar --- */
        .main-content {
            padding: clamp(1.5rem, 5vw, 4rem);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .header-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            flex-shrink: 0;
        }

        .header-row h2 { font-size: clamp(1.5rem, 4vw, 2.2rem); font-weight: 800; }

        .life-grid {
            display: grid;
            /* Fluid Grid Columns: Adjusts based on container width */
            grid-template-columns: repeat(auto-fill, minmax(clamp(12px, 2.5vw, 16px), 1fr));
            gap: clamp(6px, 1.5vw, 10px);
            overflow-y: auto;
            flex-grow: 1;
            padding-right: 10px;
        }

        .life-grid::-webkit-scrollbar { width: 3px; }
        .life-grid::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.1); border-radius: 10px; }

        /* Gems */
        .gem {
            aspect-ratio: 1;
            border-radius: 4px;
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.08);
            position: relative;
        }

        .gem.passed { background: rgba(255,255,255,0.18); border-color: transparent; }
        .gem.today {
            background: #fff;
            box-shadow: 0 0 20px #fff, 0 0 40px rgba(255,255,255,0.3);
            animation: corePulse 3s infinite ease-in-out;
            z-index: 5;
        }

        @keyframes corePulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.4); opacity: 0.8; }
        }

        /* --- Adaptive Media Queries for Android & Tabs --- */
        @media (max-width: 1024px) {
            .glass-chassis {
                grid-template-columns: 1fr; /* Stacked on Mobile/Tabs */
                grid-template-rows: auto 1fr;
                width: 98vw;
                height: 96vh;
            }
            .sidebar {
                border-right: none;
                border-bottom: 1px solid rgba(255,255,255,0.1);
                flex-direction: row;
                flex-wrap: nowrap;
                align-items: center;
                gap: 2rem;
                padding: 1.5rem;
                height: auto;
                overflow-x: auto;
            }
            .brand-section, .clock-section { flex-shrink: 0; margin: 0 !important; }
            .vial-container { margin: 0; min-width: 180px; padding: 1rem; }
            .quote-box { display: none; } /* Hide quote on mobile to save space */
            #ist-clock { font-size: 2.5rem; margin: 0; }
        }

        @media (max-width: 600px) {
            .sidebar {
                flex-wrap: wrap;
                justify-content: center;
            }
            .vial-container { width: 100%; min-width: 100%; }
        }

    </style>
</head>
<body>

    <div class="liquid-engine">
        <div class="fluid-layer"></div>
    </div>

    <div class="glass-chassis" id="chassis">
        <aside class="sidebar">
            <div class="brand-section">
                <span class="brand-badge">Vial · Platinum</span>
                <div id="ist-clock">00:00</div>
            </div>
            
            <div class="vial-container">
                <span class="vial-label">Life Remaining</span>
                <div class="vial-value" id="days-left">--</div>
            </div>

            <div class="vial-container">
                <span class="vial-label">Weather (IST)</span>
                <div style="display: flex; gap: 15px; align-items: center;">
                    <div id="temp" style="font-size: 1.5rem; font-weight: 600;">--°</div>
                    <div id="weather-status" style="font-size: 0.7rem; opacity: 0.6;">SYNCING</div>
                </div>
            </div>

            <div class="quote-box" id="motivation">
                "Small daily wins lead to giant results."
            </div>

            <div class="vial-container" style="background: transparent; border: none; box-shadow: none;">
                <span class="vial-label">Momentum</span>
                <div style="font-size: 1.5rem; font-weight: 800;" id="momentum-val">0%</div>
            </div>
        </aside>

        <main class="main-content">
            <div class="header-row">
                <h2 id="year-label">YEAR 2026</h2>
                <div id="phase-label" style="font-size: 0.7rem; opacity: 0.5; font-weight: 800; letter-spacing: 2px; border: 1px solid rgba(255,255,255,0.2); padding: 4px 12px; border-radius: 20px;">NIGHT</div>
            </div>
            <div class="life-grid" id="grid"></div>
        </main>
    </div>

    <script>
        const quotes = [
            "Every moment is a fresh beginning.",
            "Don't count the days. Make the days count.",
            "Believe you can and you're halfway there.",
            "Success is not final, failure is not fatal.",
            "Action is the foundational key to success.",
            "Your energy is your greatest asset.",
            "Create a life you love waking up to."
        ];

        async function fetchWeather() {
            try {
                // Lat/Lon for Bhiwandi/Mumbai
                const response = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=19.29&longitude=73.06&current_weather=true`);
                const data = await response.json();
                if (data.current_weather) {
                    document.getElementById('temp').textContent = Math.round(data.current_weather.temperature) + '°';
                    const map = { 0: 'CLEAR', 1: 'FAIR', 2: 'CLOUDY', 3: 'OVERCAST', 61: 'RAIN' };
                    document.getElementById('weather-status').textContent = map[data.current_weather.weathercode] || 'CLEAR';
                }
            } catch (e) { document.getElementById('weather-status').textContent = "OFFLINE"; }
        }

        function updateUI() {
            const now = new Date();
            const ist = new Date(now.getTime() + (now.getTimezoneOffset() * 60000) + (5.5 * 3600000));
            
            document.getElementById('ist-clock').textContent = ist.toLocaleTimeString('en-IN', { hour: '2-digit', minute: '2-digit', hour12: false });
            
            // Light Position Simulation for 3D Glass Surface
            const hrs = ist.getHours();
            const lightX = (hrs / 24) * 100;
            document.documentElement.style.setProperty('--lx', `${lightX}%`);
            document.documentElement.style.setProperty('--ly', hrs < 18 ? '0%' : '100%');

            // Liquid Color Themes
            let p = "NIGHT", w1="#0f172a", w2="#1e293b", w3="#334155";
            if (hrs >= 5 && hrs < 12) { p = "MORNING"; w1="#ff9a9e"; w2="#fad0c4"; w3="#ffd1ff"; }
            else if (hrs >= 12 && hrs < 17) { p = "AFTERNOON"; w1="#0ea5e9"; w2="#22d3ee"; w3="#70e1ff"; }
            else if (hrs >= 17 && hrs < 20) { p = "EVENING"; w1="#f97316"; w2="#fbbf24"; w3="#ff7b54"; }

            document.getElementById('phase-label').textContent = p;
            document.documentElement.style.setProperty('--w1', w1);
            document.documentElement.style.setProperty('--w2', w2);
            document.documentElement.style.setProperty('--w3', w3);

            // Re-render at midnight IST
            if (ist.getSeconds() === 0 && ist.getMinutes() === 0 && ist.getHours() === 0) renderCalendar();
        }

        function renderCalendar() {
            const now = new Date();
            const ist = new Date(now.getTime() + (now.getTimezoneOffset() * 60000) + (5.5 * 3600000));
            const year = ist.getFullYear();
            const total = ((year % 4 === 0 && year % 100 !== 0) || (year % 400 === 0)) ? 366 : 365;
            const start = new Date(year, 0, 0);
            const current = Math.floor((ist - start) / 86400000);

            document.getElementById('year-label').textContent = `YEAR ${year}`;
            document.getElementById('days-left').textContent = total - current;
            document.getElementById('momentum-val').textContent = ((current / total) * 100).toFixed(1) + '%';

            const grid = document.getElementById('grid');
            grid.innerHTML = '';
            const frag = document.createDocumentFragment();
            for (let i = 1; i <= total; i++) {
                const gem = document.createElement('div');
                gem.className = 'gem';
                if (i < current) gem.classList.add('passed');
                else if (i === current) gem.classList.add('today');
                frag.appendChild(gem);
            }
            grid.appendChild(frag);
        }

        window.onload = () => {
            updateUI();
            renderCalendar();
            fetchWeather();
            document.getElementById('motivation').textContent = `"${quotes[Math.floor(Math.random() * quotes.length)]}"`;
            setInterval(updateUI, 1000);
            setInterval(fetchWeather, 600000);
        };
    </script>
</body>
</html>
