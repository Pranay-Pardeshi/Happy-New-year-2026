<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Life Calendar | Universal 3D Glass</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@200;400;600;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --glass-surface: rgba(255, 255, 255, 0.02);
            --glass-rim: rgba(255, 255, 255, 0.15);
            --text-primary: #ffffff;
            --text-secondary: rgba(255, 255, 255, 0.45);
            
            /* High-Viscosity Fluid Colors */
            --w1: #0f172a; --w2: #334155; --w3: #1e293b;
            
            /* Adaptive Light Position */
            --lx: 50%; --ly: 0%;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Plus Jakarta Sans', sans-serif;
            -webkit-tap-highlight-color: transparent;
            /* Critical for Wallpaper: Disable all interaction signs */
            user-select: none;
            scrollbar-width: none;
        }

        *::-webkit-scrollbar { display: none; }

        body {
            background: #000;
            color: var(--text-primary);
            height: 100vh;
            width: 100vw;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden; /* No scroll allowed */
            position: relative;
        }

        /* --- Volumetric Fluid Background --- */
        .liquid-engine {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1;
            filter: blur(80px) contrast(1.1);
            opacity: 0.7;
            background: #000;
        }

        .fluid-layer {
            position: absolute;
            width: 200%; height: 200%;
            top: -50%; left: -50%;
            background: 
                radial-gradient(circle at 30% 30%, var(--w1) 0%, transparent 50%),
                radial-gradient(circle at 70% 60%, var(--w2) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, var(--w3) 0%, transparent 50%);
            animation: moveLiquid 25s infinite alternate ease-in-out;
        }

        @keyframes moveLiquid {
            0% { transform: translate(0,0) rotate(0deg); }
            100% { transform: translate(5%, 5%) rotate(5deg); }
        }

        /* --- Universal Adaptive Chassis --- */
        .glass-chassis {
            position: relative;
            width: 96vw;
            height: 94vh;
            display: grid;
            grid-template-columns: 320px 1fr;
            grid-template-rows: 1fr;
            
            background: var(--glass-surface);
            backdrop-filter: blur(60px) saturate(200%) brightness(0.9);
            -webkit-backdrop-filter: blur(60px) saturate(200%) brightness(0.9);
            
            border-radius: clamp(24px, 5vw, 40px);
            border: 1px solid var(--glass-rim);
            box-shadow: 
                0 40px 80px rgba(0,0,0,0.8),
                inset 0 0 40px rgba(255,255,255,0.02),
                inset 0 1px 1px rgba(255,255,255,0.3);
            
            overflow: hidden; /* Absolute lockdown on overflow */
        }

        /* Specular Surface Shine */
        .glass-chassis::before {
            content: '';
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle at var(--lx) var(--ly), rgba(255,255,255,0.06) 0%, transparent 60%);
            pointer-events: none;
            z-index: 10;
        }

        /* --- Sidebar / Wallpaper Top Deck --- */
        .sidebar {
            padding: clamp(1.5rem, 4vh, 3.5rem) clamp(1rem, 3vw, 2.5rem);
            display: flex;
            flex-direction: column;
            border-right: 1px solid rgba(255,255,255,0.08);
            background: rgba(0,0,0,0.2);
            height: 100%;
        }

        .brand-badge {
            font-size: 0.7rem;
            letter-spacing: 4px;
            font-weight: 800;
            text-transform: uppercase;
            color: #fff;
            margin-bottom: 0.4rem;
            opacity: 0.6;
        }

        #ist-clock {
            font-size: clamp(2.2rem, 5vw, 4rem);
            font-weight: 200;
            letter-spacing: -3px;
            line-height: 1;
            margin-bottom: 1.5rem;
        }

        .vial-container {
            background: rgba(255,255,255,0.04);
            border: 1px solid rgba(255,255,255,0.05);
            border-radius: 18px;
            padding: clamp(1rem, 2vh, 1.5rem);
            margin-bottom: 1rem;
            flex-shrink: 0;
        }

        .vial-label {
            font-size: 0.55rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: var(--text-secondary);
            margin-bottom: 0.3rem;
            display: block;
        }

        .vial-value { font-size: 1.6rem; font-weight: 600; }

        .quote-box {
            font-style: italic;
            font-size: 0.8rem;
            line-height: 1.4;
            color: rgba(255,255,255,0.5);
            margin-top: 1rem;
            padding: 0.8rem;
            border-left: 2px solid rgba(255,255,255,0.1);
            overflow: hidden;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
        }

        .momentum-section {
            margin-top: auto;
            padding-top: 1rem;
        }

        /* --- Main Content / Calendar --- */
        .main-content {
            padding: clamp(1.5rem, 4vw, 3.5rem);
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .header-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            flex-shrink: 0;
        }

        .header-row h2 { font-size: clamp(1.2rem, 3vw, 1.8rem); font-weight: 800; text-transform: uppercase; }

        /* No-Scroll Grid Logic */
        .life-grid {
            display: grid;
            /* Dynamically fits dots to fill the remaining screen space without scrolling */
            grid-template-columns: repeat(auto-fill, minmax(clamp(8px, 1.5vw, 15px), 1fr));
            gap: clamp(4px, 0.8vw, 10px);
            align-content: start;
            flex-grow: 1;
            overflow: hidden; /* Strictly no scroll */
        }

        /* Gems */
        .gem {
            aspect-ratio: 1;
            border-radius: 3px;
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.08);
            position: relative;
        }

        .gem.passed { background: rgba(255, 255, 255, 0.15); border-color: transparent; }
        .gem.today {
            background: #fff;
            box-shadow: 0 0 15px #fff, 0 0 30px rgba(255,255,255,0.3);
            animation: corePulse 3s infinite ease-in-out;
            z-index: 5;
        }

        @keyframes corePulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.3); opacity: 0.7; }
        }

        /* --- Static Mobile/Tab Wallpaper Layout (No Scrolling) --- */
        @media (max-width: 1024px) {
            .glass-chassis {
                grid-template-columns: 1fr;
                grid-template-rows: auto 1fr;
                width: 98vw;
                height: 98vh;
            }
            .sidebar {
                border-right: none;
                border-bottom: 1px solid rgba(255,255,255,0.1);
                flex-direction: row;
                flex-wrap: nowrap;
                align-items: center;
                gap: 1.5rem;
                padding: 1.2rem 1.5rem;
                height: auto;
                justify-content: space-between;
            }
            .brand-section { margin: 0; flex-shrink: 0; }
            #ist-clock { font-size: 1.8rem; margin: 0; }
            
            /* Hide non-critical info to prevent overflow/scrolling on small screens */
            .quote-box, .momentum-section, .weather-vial-label { display: none; }
            
            .vial-container { 
                margin: 0; 
                padding: 0.6rem 1rem; 
                border: none; 
                background: rgba(255,255,255,0.06); 
                min-width: fit-content;
            }
            .vial-value { font-size: 1.2rem; }
            .vial-label { font-size: 0.5rem; }

            .main-content { padding: 1.2rem; }
            .header-row { margin-bottom: 1rem; }
            
            /* Shrink dots even more to ensure they fit a phone height */
            .life-grid {
                grid-template-columns: repeat(auto-fill, minmax(clamp(6px, 2.5vw, 10px), 1fr));
                gap: 3px;
            }
        }

        /* Extra tiny phones fallback */
        @media (max-width: 400px) {
            .vial-container:nth-of-type(2) { display: none; } /* Hide weather on very narrow phones to prevent overlap */
            #ist-clock { font-size: 1.5rem; }
        }

    </style>
</head>
<body>

    <div class="liquid-engine">
        <div class="fluid-layer"></div>
    </div>

    <div class="glass-chassis" id="chassis">
        <aside class="sidebar">
            <div class="brand-section">
                <span class="brand-badge">Vial · Platinum</span>
                <div id="ist-clock">00:00</div>
            </div>
            
            <div class="vial-container">
                <span class="vial-label">Remaining</span>
                <div class="vial-value" id="days-left">--</div>
            </div>

            <div class="vial-container">
                <span class="vial-label weather-vial-label">Weather (IST)</span>
                <div style="display: flex; gap: 8px; align-items: center;">
                    <div id="temp" style="font-size: 1.2rem; font-weight: 600;">--°</div>
                    <div id="weather-status" style="font-size: 0.6rem; opacity: 0.6;">SYNCING</div>
                </div>
            </div>

            <div class="quote-box" id="motivation">
                "Small daily wins lead to giant results."
            </div>

            <div class="momentum-section">
                <span class="vial-label">Momentum</span>
                <div style="font-size: 1.5rem; font-weight: 800;" id="momentum-val">0%</div>
            </div>
        </aside>

        <main class="main-content">
            <div class="header-row">
                <h2 id="year-label">YEAR 2026</h2>
                <div id="phase-label" style="font-size: 0.6rem; opacity: 0.5; font-weight: 800; letter-spacing: 2px; border: 1px solid rgba(255,255,255,0.2); padding: 3px 10px; border-radius: 20px;">NIGHT</div>
            </div>
            <div class="life-grid" id="grid"></div>
        </main>
    </div>

    <script>
        const quotes = [
            "Every moment is a fresh beginning.",
            "Don't count the days. Make the days count.",
            "Believe you can and you're halfway there.",
            "Success is not final, failure is not fatal.",
            "Action is the foundational key to success.",
            "Your energy is your greatest asset.",
            "Create a life you love waking up to."
        ];

        async function fetchWeather() {
            try {
                const response = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=19.29&longitude=73.06&current_weather=true`);
                const data = await response.json();
                if (data.current_weather) {
                    document.getElementById('temp').textContent = Math.round(data.current_weather.temperature) + '°';
                    const map = { 0: 'CLEAR', 1: 'FAIR', 2: 'CLOUDY', 3: 'OVERCAST', 61: 'RAIN' };
                    document.getElementById('weather-status').textContent = map[data.current_weather.weathercode] || 'CLEAR';
                }
            } catch (e) { document.getElementById('weather-status').textContent = "OFFLINE"; }
        }

        function updateUI() {
            const now = new Date();
            const ist = new Date(now.getTime() + (now.getTimezoneOffset() * 60000) + (5.5 * 3600000));
            
            document.getElementById('ist-clock').textContent = ist.toLocaleTimeString('en-IN', { hour: '2-digit', minute: '2-digit', hour12: false });
            
            const hrs = ist.getHours();
            const lightX = (hrs / 24) * 100;
            document.documentElement.style.setProperty('--lx', `${lightX}%`);
            document.documentElement.style.setProperty('--ly', hrs < 18 ? '0%' : '100%');

            let p = "NIGHT", w1="#0f172a", w2="#1e293b", w3="#334155";
            if (hrs >= 5 && hrs < 12) { p = "MORNING"; w1="#ff9a9e"; w2="#fad0c4"; w3="#ffd1ff"; }
            else if (hrs >= 12 && hrs < 17) { p = "AFTERNOON"; w1="#0ea5e9"; w2="#22d3ee"; w3="#70e1ff"; }
            else if (hrs >= 17 && hrs < 20) { p = "EVENING"; w1="#f97316"; w2="#fbbf24"; w3="#ff7b54"; }

            document.getElementById('phase-label').textContent = p;
            document.documentElement.style.setProperty('--w1', w1);
            document.documentElement.style.setProperty('--w2', w2);
            document.documentElement.style.setProperty('--w3', w3);

            if (ist.getSeconds() === 0 && ist.getMinutes() === 0 && ist.getHours() === 0) renderCalendar();
        }

        function renderCalendar() {
            const now = new Date();
            const ist = new Date(now.getTime() + (now.getTimezoneOffset() * 60000) + (5.5 * 3600000));
            const year = ist.getFullYear();
            const total = ((year % 4 === 0 && year % 100 !== 0) || (year % 400 === 0)) ? 366 : 365;
            const start = new Date(year, 0, 0);
            const current = Math.floor((ist - start) / 86400000);

            document.getElementById('year-label').textContent = `YEAR ${year}`;
            document.getElementById('days-left').textContent = total - current;
            document.getElementById('momentum-val').textContent = ((current / total) * 100).toFixed(1) + '%';

            const grid = document.getElementById('grid');
            grid.innerHTML = '';
            const frag = document.createDocumentFragment();
            for (let i = 1; i <= total; i++) {
                const gem = document.createElement('div');
                gem.className = 'gem';
                if (i < current) gem.classList.add('passed');
                else if (i === current) gem.classList.add('today');
                frag.appendChild(gem);
            }
            grid.appendChild(frag);
        }

        window.onload = () => {
            updateUI();
            renderCalendar();
            fetchWeather();
            document.getElementById('motivation').textContent = `"${quotes[Math.floor(Math.random() * quotes.length)]}"`;
            setInterval(updateUI, 1000);
            setInterval(fetchWeather, 600000);
        };
    </script>
</body>
</html>
